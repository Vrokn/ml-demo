import{X as k,r as c,Y as D,Z as E,b as n,W as l,j as t,$ as I,a0 as g}from"./index-92472fc8.js";import{a as w}from"./api-ca0f4f83.js";import{T as o,d as f,a as x,b as y,c as P,G as v,L as W,C as $}from"./Star-d6e522bc.js";const A=r=>w({method:"GET",url:`/api/v1/music/artists/${r}`}),G=r=>w({method:"GET",url:`/api/v1/music/artists/${r}/similar`}),_=()=>{const{artistId:r}=k(),[a,b]=c.useState(null),[m,C]=c.useState([]),{artists:S,toggleArtist:j}=D(),{showSnackbar:u}=E();c.useEffect(()=>{r&&(A(parseInt(r)).then(e=>{var i;b((i=e==null?void 0:e.data.data)==null?void 0:i[0])}).catch(e=>{u(e==null?void 0:e.message,"error"),console.error("An error occurred while fetching artist details:",e)}),G(parseInt(r)).then(e=>{C(e==null?void 0:e.data.data)}).catch(e=>{u(e==null?void 0:e.message,"error"),console.error("An error occurred while fetching related artist details:",e)}))},[r]);const d=c.useMemo(()=>(a==null?void 0:a.genres.filter(e=>e.is_primary))||[],[a]),h=c.useMemo(()=>(a==null?void 0:a.genres.filter(e=>e.is_primary!==1))||[],[a]),s=e=>S.some(i=>i.id===e),p=e=>{j(e)};return n(l,{display:"flex",flex:1,justifyContent:"space-between",children:[(!a||!m)&&t(I,{}),t(l,{sx:{padding:"2em",display:"flex",flexDirection:"column",justifyContent:"center"},children:a&&n(l,{display:"flex",flexDirection:"column",gap:"1em",children:[n(o,{fontSize:"3vw",fontWeight:"bold",maxWidth:"40vw",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.name.toLocaleUpperCase()," :"]}),t("img",{src:a.image,alt:a.name,style:{height:"54vh",width:"40vw",objectFit:"cover",borderRadius:"4px"},onError:e=>{e.target.src="https://placehold.co/400?text=No+image"}}),t(g,{onClick:()=>p(a),startIcon:s(a.id)?t(f,{}):t(x,{}),variant:s(a.id)?"contained":"outlined",children:s(a.id)?"Remove":"Add"}),(d==null?void 0:d.length)>0&&t(y,{genres:d,label:"Primary genres",color:"primary"}),(h==null?void 0:h.length)>0&&t(y,{genres:h,label:"Additional genres",color:"secondary"}),n(P,{children:[t(o,{variant:"caption",children:"Popularity score:"}),t(o,{variant:"h6",fontWeight:"bold",children:a.popularity})]})]})}),m.length>0&&n(l,{sx:{overflow:"auto",padding:"2em",maxHeight:"85vh",width:"60%"},my:.5,children:[t(o,{variant:"h5",color:"secondary",children:"Similar artists:"}),t(v,{container:!0,children:m.map(e=>t(v,{item:!0,xl:6,sm:12,children:n(l,{display:"flex",gap:"2em",alignItems:"center",width:"100%",my:1,children:[n(l,{display:"flex",flexDirection:"column",children:[t("img",{src:e.image,alt:e.name,style:{height:"140px",width:"140px",objectFit:"cover",borderRadius:"4px"},onError:i=>{i.target.src="https://placehold.co/400?text=No+image"}}),t(g,{fullWidth:!0,onClick:()=>p(e),startIcon:s(e.id)?t(f,{}):t(x,{}),variant:s(e.id)?"contained":"outlined",size:"small",children:s(e.id)?"Remove":"Add"})]}),n(l,{display:"flex",flexDirection:"column",children:[t(o,{variant:"h6",children:t(W,{href:`/artist/${e.id}`,children:e.name})}),n(o,{variant:"body2",color:"secondary",children:["Genres: ",e.genres.map(i=>t($,{label:i.name,color:"primary",size:"small",variant:"outlined"},i.id))]})]})]})},e.id))})]})]})};export{_ as default};
